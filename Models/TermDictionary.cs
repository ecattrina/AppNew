namespace AppNew.Models
{
    public class TermDefinition
    {
        public string Term { get; set; } = string.Empty;
        public string Definition { get; set; } = string.Empty;
        public List<string> Synonyms { get; set; } = new List<string>();
    }

    public static class TermDictionary
    {
        public static Dictionary<string, TermDefinition> Terms { get; } = new Dictionary<string, TermDefinition>
        {
            ["бит"] = new TermDefinition
            {
                Term = "Бит",
                Definition = "Бит (binary digit) - минимальная единица информации в двоичной системе счисления, может принимать значение 0 или 1."
            },
            ["синдром"] = new TermDefinition
            {
                Term = "Синдром",
                Definition = "Синдром - остаток от деления принятого кодового слова на порождающий многочлен. Используется для обнаружения и исправления ошибок в коде. Если синдром равен нулю, ошибок нет; если не равен нулю, указывает на позицию ошибки."
            },
            ["полином"] = new TermDefinition
            {
                Term = "Полином (многочлен)",
                Definition = "Полином - математическое выражение вида a₀ + a₁x + a₂x² + ... + aₙxⁿ, где коэффициенты aᵢ принадлежат полю GF(2) (0 или 1). В теории кодирования используется для представления кодовых комбинаций."
            },
            ["позиция"] = new TermDefinition
            {
                Term = "Позиция",
                Definition = "Позиция - номер разряда (бита) в кодовой комбинации. Обычно нумерация начинается с 1 (слева направо) или с 0 (справа налево)."
            },
            ["вероятность безотказной работы"] = new TermDefinition
            {
                Term = "Вероятность безотказной работы",
                Definition = "Вероятность безотказной работы P(t) - вероятность того, что объект будет работать безотказно в течение времени t. Вычисляется как отношение числа работоспособных объектов к общему числу объектов: P(t) = (N - n(t)) / N, где N - общее число объектов, n(t) - число отказов к моменту времени t."
            },
            ["вероятность отказов"] = new TermDefinition
            {
                Term = "Вероятность отказов",
                Definition = "Вероятность отказов F(t) - вероятность того, что объект откажет в течение времени t. Вычисляется как отношение числа отказавших объектов к общему числу объектов: F(t) = n(t) / N. Связана с вероятностью безотказной работы: F(t) = 1 - P(t)."
            },
            ["плотность распределения отказов"] = new TermDefinition
            {
                Term = "Плотность распределения отказов",
                Definition = "Плотность распределения отказов f(t) - статистическая оценка интенсивности отказов в единицу времени. Вычисляется как отношение приращения числа отказов к произведению общего числа объектов на интервал времени: f(t) = Δn / (N · Δt), где Δn - число отказов за интервал Δt."
            },
            ["интенсивность отказов"] = new TermDefinition
            {
                Term = "Интенсивность отказов",
                Definition = "Интенсивность отказов λ(t) - условная вероятность отказа объекта в единицу времени при условии, что он работал до этого момента. Вычисляется как отношение приращения числа отказов к произведению числа работоспособных объектов на начало интервала на длину интервала: λ(t) = Δn / ((N - n(t-1)) · Δt)."
            },
            ["код хэмминга"] = new TermDefinition
            {
                Term = "Код Хэмминга",
                Definition = "Код Хэмминга - линейный блочный код, способный обнаруживать и исправлять одиночные ошибки. Контрольные биты располагаются на позициях, являющихся степенями двойки (1, 2, 4, 8, ...). Каждый контрольный бит контролирует определенные информационные биты."
            },
            ["циклический код"] = new TermDefinition
            {
                Term = "Циклический код",
                Definition = "Циклический код - линейный блочный код, обладающий свойством цикличности: любая циклическая перестановка кодового слова также является кодовым словом. Кодирование и декодирование выполняются с помощью операций над полиномами в поле GF(2)."
            },
            ["порождающий многочлен"] = new TermDefinition
            {
                Term = "Порождающий многочлен",
                Definition = "Порождающий многочлен g(x) - многочлен степени r = n - k, используемый для кодирования и декодирования в циклическом коде. Все кодовые слова делятся на g(x) без остатка. Остаток от деления используется для обнаружения ошибок."
            },
            ["контрольный бит"] = new TermDefinition
            {
                Term = "Контрольный бит (бит четности)",
                Definition = "Контрольный бит (бит четности) - дополнительный бит, добавляемый к информационным битам для обнаружения и исправления ошибок. Значение контрольного бита выбирается так, чтобы сумма контролируемых битов (по модулю 2) была четной."
            },
            ["информационный бит"] = new TermDefinition
            {
                Term = "Информационный бит",
                Definition = "Информационный бит - бит, несущий полезную информацию. В коде (n, k) количество информационных битов равно k, остальные (n - k) битов являются контрольными."
            },
            ["кодовая комбинация"] = new TermDefinition
            {
                Term = "Кодовая комбинация",
                Definition = "Кодовая комбинация (кодовое слово) - последовательность битов, полученная в результате кодирования информационной комбинации. Содержит как информационные, так и контрольные биты."
            },
            ["информационная комбинация"] = new TermDefinition
            {
                Term = "Информационная комбинация",
                Definition = "Информационная комбинация - исходная последовательность битов, подлежащая кодированию. После кодирования преобразуется в кодовую комбинацию."
            },
            ["остаток"] = new TermDefinition
            {
                Term = "Остаток",
                Definition = "Остаток r(x) - результат деления полинома на порождающий многочлен g(x) по модулю 2. В циклических кодах остаток используется для формирования контрольных битов при кодировании и для вычисления синдрома при декодировании."
            },
            ["деление по модулю 2"] = new TermDefinition
            {
                Term = "Деление по модулю 2",
                Definition = "Деление по модулю 2 - операция деления полиномов в поле GF(2), где все коэффициенты равны 0 или 1, а сложение и вычитание эквивалентны операции XOR (исключающее ИЛИ)."
            }
        };

        public static TermDefinition? GetDefinition(string term)
        {
            var lowerTerm = term.ToLower().Trim();
            if (Terms.ContainsKey(lowerTerm))
                return Terms[lowerTerm];

            // Поиск по синонимам
            foreach (var kvp in Terms)
            {
                if (kvp.Value.Synonyms.Any(s => s.ToLower() == lowerTerm))
                    return kvp.Value;
            }

            return null;
        }
    }
}
